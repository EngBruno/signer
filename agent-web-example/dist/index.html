<!DOCTYPE html>

<head>
    <meta charset="utf-8">
    <title>Demoiselle Signer - Agent UI</title>
</head>

<html>

<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.2/angular.min.js"></script>
<script src="./lib.js"></script>
<script src="./app.min.js"></script>
<link href="./app.min.css" rel="stylesheet" type="text/css" />

<body>
    <div id="main" ng-app="agent-desktop" ng-controller="controller">
        <div id="main_list">
            <ul id="action">
                <li ng-click="listarCertificados()">Listar Certificados instalados</li>
                <li ng-click="status()">Verificar status</li>
                <li ng-click="assinar()">Assinar</li>
                <li ng-click="shutdown()">Desligar Agent Desktop</li>
                <li ng-click="logout()">Deslogar o PIN</li>
                <li ng-click="getfiles()">Selecionar Arquivo</li>
            </ul>
        </div>
        <h2 style="float:left">Interface do Aplicativo Demoiselle Signer Agent Desktop</h2>
        <div id="into">
            <table style="width:850px">
                <tr>
                    <th>Alias</th>
                    <th>Emitido para</th>
                    <th>Não antes</th>
                    <th>Não depois</th>
                    <th>Provedor</th>
                    <th>Acao</th>
                </tr>
                <tr ng-repeat="cert in listaCertificados.certificates">
                    <td>{{ cert.alias }}</td>
                    <td>{{ cert.subject }}</td>
                    <td>{{ cert.notBefore }}</td>
                    <td>{{ cert.notAfter }}</td>
                    <td>{{ cert.provider }}</td>
                    <td>
                        <button ng-click="assinar(cert.alias, cert.provider, content)">Assinar Texto</button>
                        <button ng-click="assinarArquivo(cert.alias, cert.provider, content)">Assinar Documento</button>
                    </td>
                </tr>
            </table>
            <br><br>

            <div>
                Texto a ser assinado: <input type="text" ng-model="content">
            </div>

            <div>
                <select id="polices" ng-model="politica"><option ng-repeat="p in listaPoliticas" value="{{p}}">{{p}} </select>
                <input type="button" value="Carregar lista de politicas" ng-click="listarPoliticas()">
            </div>

            <div style="margin-top:10px;">
                Resultado da Assinatura: <textarea id="result" name="signed">{{signed}}</textarea>
            </div>
            <div>
                Erros: <input id="errors" type="text" ng-model="erros">
            </div>
            <div>
                Arquivo: <input id="errors" type="text" ng-model="fileName">
            </div>
            <div>
                Arquivo Assinado: <input id="errors" type="text" ng-model="signedFileName">
            </div>
            <div id="serverstate" style="margin-top:100px"><a href="agent-desktop.jnlp" download> Baixar/Executar Agent-Desktop </a></div>
        </div>
    </div>
</body>

</html>