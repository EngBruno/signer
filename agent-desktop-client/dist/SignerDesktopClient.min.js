var Promise=function(){var e=null,n=null;this.success=function(n){return e=n,this},this.error=function(e){return n=e,this},this.resolve=function(n){e(n)},this.hasCallbackError=function(){return null!==n},this.reject=function(e){n(e)}},SignerDesktopClient=function(){var e,n=null,r="ws://localhost:9091/",o=!1,t=function(e){o&&console.log(e)},a={setUriServer:function(e){t("Setting URI to "+e),r=e},setDebug:function(e){t("Setting debug on to "+(e?"ON":"OFF")),o=e},connect:function(o,a,l){null!=e&&1==e.readyState||(t("Connecting on "+r),e=new WebSocket(r),e.onopen=function(e){o&&o(e.target.readyState)},e.onclose=function(e){a&&a(e.target.readyState)},e.onmessage=function(e){var r=JSON.parse(e.data);void 0!==r&&void 0!==r.error?n.hasCallbackError()?n.reject(r):l&&l(r):n.resolve(r)},e.onerror=function(e){n.hasCallbackError()?n.reject(e):l&&l(e)})},isConnected:function(){return null!=e&&1==e.readyState},signer:function(e,n,r,o){var t={command:"signer",type:"raw",format:"text",compacted:!1,alias:e,signaturePolicy:o,provider:n,content:r},l=a.execute(t);return l},validate:function(e,n){var r={command:"validate",format:"base64",content:e,signature:n},o=a.execute(r);return o},signerFile:function(e,n,r,o){var t={command:"filesigner",type:"raw",format:"text",compacted:!1,alias:e,signaturePolicy:o,provider:n,content:r},l=a.execute(t);return l},validateFile:function(){var e={command:"validatefile"},n=a.execute(e);return n},signerFileUsingDefaults:function(){var e={command:"filesignerusingdefaults",type:"raw",format:"text",compacted:!1},n=a.execute(e);return n},logoutPKCS11:function(){var n={command:"logoutpkcs11"};e.send(JSON.stringify(n))},status:function(){var e={command:"status"},n=a.execute(e);return n},listCerts:function(){var e={command:"listcerts"},n=a.execute(e);return n},listPolicies:function(){var e={command:"listpolicies"},n=a.execute(e);return n},getFiles:function(){var e={command:"getfiles"},n=a.execute(e);return n},shutdown:function(){var n={command:"shutdown"};e.send(JSON.stringify(n))},execute:function(o){return t("Sending command ["+o.command+"] to URI ["+r+"]"),n=new Promise,e.send(JSON.stringify(o)),n},setUriServerWrapper:function(e){console.log("Wrapper called. Params:"),console.log(e),a.setUriServer(e.uri)},setDebugWrapper:function(e){console.log("Wrapper called. Params:"),console.log(e),a.setDebug(e.isToDebug)},connectWrapper:function(e){console.log("Wrapper called. Params:"),console.log(e),a.connect(e.callbackOpen,e.callbackClose,e.callbackError)},isConnectedWrapper:function(e){return console.log("Wrapper called. Params:"),console.log(e),a.isConnected()},signerWrapper:function(e){return console.log("Wrapper called. Params:"),console.log(e),a.signer(e.alias,e.provider,e.content,e.signaturePolicy)},validateWrapper:function(e){return console.log("Wrapper called. Params:"),console.log(e),a.validate(e.content,e.signature)},signerFileWrapper:function(e){return console.log("Wrapper called. Params:"),console.log(e),a.signerFile(e.alias,e.provider,e.fileName,e.signaturePolicy)},validateFileWrapper:function(e){return console.log("Wrapper called. Params:"),console.log(e),a.validateFile()},signerFileUsingDefaultsWrapper:function(e){return console.log("Wrapper called. Params:"),console.log(e),a.signerFileUsingDefaults()},logoutPKCS11Wrapper:function(e){console.log("Wrapper called. Params:"),console.log(e),a.logoutPKCS11()},statusWrapper:function(e){return console.log("Wrapper called. Params:"),console.log(e),a.status()},listCertsWrapper:function(e){return console.log("Wrapper called. Params:"),console.log(e),a.listCerts()},listPoliciesWrapper:function(){return console.log("Wrapper called. Params:"),console.log(params),a.listPolicies()},getFilesWrapper:function(){return console.log("Wrapper called. Params:"),console.log(params),a.getFiles()},shutdownWrapper:function(){console.log("Wrapper called. Params:"),console.log(params),a.shutdown()}};return a}();