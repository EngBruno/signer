var Promise=function(){var n=null,t=null;this.success=function(t){return n=t,this},this.error=function(n){return t=n,this},this.resolve=function(t){n(t)},this.hasCallbackError=function(){return null!==t},this.reject=function(n){t(n)}},SignerDesktopClient=function(){var n,t=null,e="ws://localhost:9091/",r=!1,o=function(n){r&&console.log(n)},i={setUriServer:function(n){o("Setting URI to "+n),e=n},setDebug:function(n){o("Setting debug on to "+(n?"ON":"OFF")),r=n},connect:function(r,i,c){null!=n&&1==n.readyState||(o("Connecting on "+e),n=new WebSocket(e),n.onopen=function(n){r&&r(n.target.readyState)},n.onclose=function(n){i&&i(n.target.readyState)},n.onmessage=function(n){var e=JSON.parse(n.data);void 0!==e&&void 0!==e.error?t.hasCallbackError()?t.reject(e):c&&c(e):t.resolve(e)},n.onerror=function(n){t.hasCallbackError()?t.reject(n):c&&c(n)})},isConnected:function(){return null!=n&&1==n.readyState},signer:function(n,t,e,r){var o={command:"signer",type:"raw",format:"text",compacted:!1,alias:n,signaturePolicy:r,provider:t,content:e},c=i.execute(o);return c},signerFile:function(n,t,e,r){var o={command:"filesigner",type:"raw",format:"text",compacted:!1,alias:n,signaturePolicy:r,provider:t,content:e},c=i.execute(o);return c},logoutPKCS11:function(){var t={command:"logoutpkcs11"};n.send(JSON.stringify(t))},status:function(){var n={command:"status"},t=i.execute(n);return t},listCerts:function(){var n={command:"listcerts"},t=i.execute(n);return t},listPolicies:function(){var n={command:"listpolicies"},t=i.execute(n);return t},getFiles:function(){var n={command:"getfiles"},t=i.execute(n);return t},shutdown:function(){var t={command:"shutdown"};n.send(JSON.stringify(t))},execute:function(r){return o("Sending command ["+r.command+"] to URI ["+e+"]"),t=new Promise,n.send(JSON.stringify(r)),t}};return i}();