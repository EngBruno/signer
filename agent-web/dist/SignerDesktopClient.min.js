var Promise=function(){var t=null,e=null;this.success=function(e){return t=e,this},this.error=function(t){return e=t,this},this.resolve=function(e){t(e)},this.hasCallbackError=function(){return null!==e},this.reject=function(t){e(t)}},SignerDesktopClient=function(){var t,e=null,n="ws://localhost:9091/",r=!1,o=function(t){r&&console.log(t)},i={setUriServer:function(t){o("Setting URI to "+t),n=t},setDebug:function(t){o("Setting debug on to "+(t?"ON":"OFF")),r=t},connect:function(r,i,c){null!=t&&1==t.readyState||(o("Connecting on "+n),t=new WebSocket(n),t.onopen=function(t){r&&r(t.target.readyState)},t.onclose=function(t){i&&i(t.target.readyState)},t.onmessage=function(t){var n=JSON.parse(t.data);void 0!==n&&void 0!==n.error?e.hasCallbackError()?e.reject(n):c&&c(n):e.resolve(n)},t.onerror=function(t){e.hasCallbackError()?e.reject(t):c&&c(t)})},isConnected:function(){return null!=t&&1==t.readyState},signer:function(t,e,n,r){var o={command:"signer",type:"raw",format:"text",compacted:!1,alias:t,signaturePolicy:r,provider:e,content:n},c=i.execute(o);return c},validate:function(t,e){var n={command:"validate",format:"base64",content:t,signature:e},r=i.execute(n);return r},signerFile:function(t,e,n,r){var o={command:"filesigner",type:"raw",format:"text",compacted:!1,alias:t,signaturePolicy:r,provider:e,content:n},c=i.execute(o);return c},validateFile:function(){var t={command:"validatefile"},e=i.execute(t);return e},logoutPKCS11:function(){var e={command:"logoutpkcs11"};t.send(JSON.stringify(e))},status:function(){var t={command:"status"},e=i.execute(t);return e},listCerts:function(){var t={command:"listcerts"},e=i.execute(t);return e},listPolicies:function(){var t={command:"listpolicies"},e=i.execute(t);return e},getFiles:function(){var t={command:"getfiles"},e=i.execute(t);return e},shutdown:function(){var e={command:"shutdown"};t.send(JSON.stringify(e))},execute:function(r){return o("Sending command ["+r.command+"] to URI ["+n+"]"),e=new Promise,t.send(JSON.stringify(r)),e}};return i}();