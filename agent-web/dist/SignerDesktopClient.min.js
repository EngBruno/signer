var Promise=function(){var e=null,n=null;this.success=function(n){return e=n,this},this.error=function(e){return n=e,this},this.resolve=function(n){e(n)},this.hasCallbackError=function(){return null!==n},this.reject=function(e){n(e)}},SignerDesktopClient=function(){var e,n=null,t="ws://localhost:9091/",r=!1,o=function(e){r&&console.log(e)},i={setUriServer:function(e){o("Setting URI to "+e),t=e},setDebug:function(e){o("Setting debug on to "+(e?"ON":"OFF")),r=e},connect:function(r,i,c){null!=e&&1==e.readyState||(o("Connecting on "+t),e=new WebSocket(t),e.onopen=function(e){r&&r(e.target.readyState)},e.onclose=function(e){i&&i(e.target.readyState)},e.onmessage=function(e){var t=JSON.parse(e.data);void 0!==t&&void 0!==t.error?n.hasCallbackError()?n.reject(t):c&&c(t):n.resolve(t)},e.onerror=function(e){n.hasCallbackError()?n.reject(e):c&&c(e)})},isConnected:function(){return null!=e&&1==e.readyState},signer:function(e,n,t,r){var o={command:"signer",type:"raw",format:"text",compacted:!1,alias:e,signaturePolicy:r,provider:n,content:t},c=i.execute(o);return c},validate:function(e,n){var t={command:"validate",format:"base64",content:e,signature:n},r=i.execute(t);return r},signerFile:function(e,n,t,r){var o={command:"filesigner",type:"raw",format:"text",compacted:!1,alias:e,signaturePolicy:r,provider:n,content:t},c=i.execute(o);return c},validateFile:function(){var e={command:"validatefile"},n=i.execute(e);return n},signerFileUsingDefaults:function(e){var n={command:"filesignerdefaults",type:"raw",format:"text",compacted:!1,content:e},t=i.execute(n);return t},logoutPKCS11:function(){var n={command:"logoutpkcs11"};e.send(JSON.stringify(n))},status:function(){var e={command:"status"},n=i.execute(e);return n},listCerts:function(){var e={command:"listcerts"},n=i.execute(e);return n},listPolicies:function(){var e={command:"listpolicies"},n=i.execute(e);return n},getFiles:function(){var e={command:"getfiles"},n=i.execute(e);return n},shutdown:function(){var n={command:"shutdown"};e.send(JSON.stringify(n))},execute:function(r){return o("Sending command ["+r.command+"] to URI ["+t+"]"),n=new Promise,e.send(JSON.stringify(r)),n},setUriServer:function(e){console.log("Wraper called."),i.setUriServer(e.uri)},setDebug:function(e){console.log("Wraper called."),i.setDebug(e.isToDebug)},connect:function(e){console.log("Wraper called."),i.connect(e.callbackOpen,e.callbackClose,e.callbackError)},isConnected:function(e){return console.log("Wraper called."),i.isConnected()},signer:function(e){return console.log("Wraper called."),i.signer(e.alias,e.provider,e.content,e.signaturePolicy)},validate:function(e){return console.log("Wraper called."),i.validate(e.content,e.signature)},signerFile:function(e){return console.log("Wraper called."),i.signerFile(e.alias,e.provider,e.fileName,e.signaturePolicy)},validateFile:function(e){return console.log("Wraper called."),i.validateFile()},signerFileUsingDefaults:function(e){return i.signerFileUsingDefaults(e.fileName)},logoutPKCS11:function(e){console.log("Wraper called."),i.logoutPKCS11()},status:function(e){return console.log("Wraper called."),i.status()},listCerts:function(e){return console.log("Wraper called."),i.listCerts()},listPolicies:function(){return console.log("Wraper called."),i.listPolicies()},getFiles:function(){return console.log("Wraper called."),i.getFiles()},shutdown:function(){console.log("Wraper called."),i.shutdown()}};return i}();