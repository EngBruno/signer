var Promise=function(){var t=null,n=null;this.success=function(n){return t=n,this},this.error=function(t){return n=t,this},this.resolve=function(n){t(n)},this.hasCallbackError=function(){return null!==n},this.reject=function(t){n(t)}},SignerDesktopClient=function(){var t,n=null,e="ws://localhost:9091/",r=!1,o=function(t){r&&console.log(t)},i={setUriServer:function(t){o("Setting URI to "+t),e=t},setDebug:function(t){o("Setting debug on to "+(t?"ON":"OFF")),r=t},connect:function(r,i,c){null!=t&&1==t.readyState||(o("Connecting on "+e),t=new WebSocket(e),t.onopen=function(t){r&&r(t.target.readyState)},t.onclose=function(t){i&&i(t.target.readyState)},t.onmessage=function(t){var e=JSON.parse(t.data);void 0!==e&&void 0!==e.error?n.hasCallbackError()?n.reject(e):c&&c(e):n.resolve(e)},t.onerror=function(t){n.hasCallbackError()?n.reject(t):c&&c(t)})},isConnected:function(){return null!=t&&1==t.readyState},signer:function(t,n,e,r){var o={command:"signer",type:"raw",format:"text",compacted:!1,alias:t,signaturePolicy:r,provider:n,content:e},c=i.execute(o);return c},signerWithPassword:function(t,n,e,r,o){var c={command:"signer",type:"raw",format:"text",compacted:!1,alias:t,signaturePolicy:o,password:n,provider:e,content:r},a=i.execute(c);return a},logoutPKCS11:function(){var n={command:"logoutpkcs11"};t.send(JSON.stringify(n))},status:function(){var t={command:"status"},n=i.execute(t);return n},listCerts:function(t){var n={command:"listcerts",password:t},e=i.execute(n);return e},listPolicies:function(){var t={command:"listpolicies"},n=i.execute(t);return n},getFiles:function(){var t={command:"getfiles"},n=i.execute(t);return n},signerFile:function(t,n,e,r){var o={command:"filesigner",type:"raw",format:"text",compacted:!1,alias:t,signaturePolicy:r,provider:n,content:e},c=i.execute(o);return c},shutdown:function(){var n={command:"shutdown"};t.send(JSON.stringify(n))},execute:function(r){return o("Sending command ["+r.command+"] to URI ["+e+"]"),n=new Promise,t.send(JSON.stringify(r)),n}};return i}();