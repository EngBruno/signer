var Promise=function(){var e=null;this.then=function(n){e=n},this.resolve=function(n){e(n)}},SignerDesktopClient=function(){var e,n=null,t="ws://localhost:9091/",o=!1,i=function(e){o&&console.log(e)},r={setUriServer:function(e){i("Setting URI to "+e),t=e},setDebug:function(e){i("Setting debug on to "+(e?"ON":"OFF")),o=e},connect:function(o){null!=e&&1==e.readyState||(i("Connecting on "+t),e=new WebSocket(t),e.onopen=function(e){i("On Open"),o&&o(e.target.readyState)},e.onclose=function(e){i("On Close"),o&&o(e.target.readyState)},e.onmessage=function(e){i("On Message"),n.resolve(JSON.parse(e.data))})},isConnected:function(){return null!=e&&1==e.readyState},signer:function(e,n,t,o){var i={command:"signer",type:"raw",format:"text",compacted:!1,alias:e,signaturePolicy:o,provider:n,content:t},s=r.execute(i);return s},signerWithPassword:function(e,n,t,o,i){var s={command:"signer",type:"raw",format:"text",compacted:!1,alias:e,signaturePolicy:i,password:n,provider:t,content:o},c=r.execute(s);return c},logoutPKCS11:function(){var n={command:"logoutpkcs11"};e.send(JSON.stringify(n))},status:function(){var e={command:"status"},n=r.execute(e);return n},listCerts:function(e){var n={command:"listcerts",password:e},t=r.execute(n);return t},listPolicies:function(){var e={command:"listpolicies"},n=r.execute(e);return n},getFiles:function(){var e={command:"getfiles"},n=r.execute(e);return n},signerFile:function(e,n,t,o){var i={command:"filesigner",type:"raw",format:"text",compacted:!1,alias:e,signaturePolicy:o,provider:n,content:t},s=r.execute(i);return s},shutdown:function(){var n={command:"shutdown"};e.send(JSON.stringify(n))},execute:function(t){return i("Sending command ["+t.command+"] to URI ["+uri+"]"),n=new Promise,e.send(JSON.stringify(t)),n}};return r}();void 0===window.SignerDesktopClient?(console.log("SignerDesktopClient started."),window.SignerDesktopClient=new SignerDesktopClient):console.log("SignerDesktopClient already defined.");